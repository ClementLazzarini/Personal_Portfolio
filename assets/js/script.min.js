document.addEventListener("DOMContentLoaded",(()=>{const navLinks=document.querySelectorAll(".bottom-navbar .nav-link"),sections=document.querySelectorAll("header[id], section[id]"),updateActiveNavLink=()=>{let currentActiveSectionId=null;const scrollPosition=window.scrollY;sections.forEach((section=>{const sectionTop=section.offsetTop,sectionHeight=section.clientHeight;scrollPosition>=sectionTop-150&&scrollPosition<sectionTop+sectionHeight-150&&(currentActiveSectionId=section.id)})),!currentActiveSectionId&&sections.length>0&&(currentActiveSectionId=sections[0].id),navLinks.forEach((link=>{link.classList.remove("active"),link.getAttribute("href").substring(1)===currentActiveSectionId&&link.classList.add("active")}))};window.addEventListener("scroll",updateActiveNavLink),window.addEventListener("load",updateActiveNavLink),navLinks.forEach((link=>{link.addEventListener("click",(event=>{navLinks.forEach((nav=>nav.classList.remove("active"))),link.classList.add("active")}))}));const contactForm=document.getElementById("contactForm"),formMessages=document.getElementById("form-messages"),sendButton=document.querySelector(".send-message-button");contactForm.addEventListener("submit",(function(event){event.preventDefault(),sendButton.disabled=!0,formMessages.textContent="Envoie en cours...",formMessages.style.color="#FFA500";if(""!==document.getElementById("website").value)return console.warn("Spam détecté via le champ honeypot."),void setTimeout((()=>{formMessages.textContent="Votre message a été envoyé avec succès !",formMessages.style.color="#4CAF50",contactForm.reset(),sendButton.disabled=!1}),1e3);const name=document.getElementById("name").value,email=document.getElementById("email").value,subject=document.getElementById("subject").value,message=document.getElementById("message").value;emailjs.init("UaKKY6fywjdxH9m9R");const templateParams={to_name:"Votre Nom",from_name:name,from_email:email,firstname:name,lastname:name,subject:subject,message:message};formMessages.textContent="Envoi en cours...",formMessages.style.color="#FFA500",emailjs.send("service_k7boed8","template_s013tj7",templateParams).then((()=>{formMessages.textContent="Votre message a été envoyé avec succès !",formMessages.style.color="#4CAF50",contactForm.reset()}),(error=>{formMessages.textContent="Erreur lors de l'envoi du message : "+error.text,formMessages.style.color="#FF0000",console.error("Erreur EmailJS :",error)}))}));const priceCardsContainer=document.querySelector(".price-cards-container"),dots=document.querySelectorAll(".swipe-indicator .dot");if(priceCardsContainer&&dots.length>0){const updateDots=()=>{const scrollLeft=priceCardsContainer.scrollLeft,firstCard=priceCardsContainer.querySelector(".price-card");if(!firstCard)return;const cardWidthWithGap=firstCard.offsetWidth+parseFloat(getComputedStyle(priceCardsContainer).gap);let activeIndex=Math.round(scrollLeft/cardWidthWithGap);activeIndex=Math.max(0,Math.min(activeIndex,dots.length-1)),dots.forEach(((dot,index)=>{index===activeIndex?dot.classList.add("active"):dot.classList.remove("active")}))};priceCardsContainer.addEventListener("scroll",updateDots),updateDots()}}));