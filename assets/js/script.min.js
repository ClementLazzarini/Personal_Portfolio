function initNavbarScroll(){const navLinks=document.querySelectorAll(".bottom-navbar .nav-link"),sections=document.querySelectorAll("header[id], section[id]");if(0===navLinks.length||0===sections.length)return;const updateActiveNavLink=()=>{let currentActiveSectionId=null;const scrollPosition=window.scrollY;sections.forEach((section=>{const sectionTop=section.offsetTop,sectionHeight=section.clientHeight;scrollPosition>=sectionTop-150&&scrollPosition<sectionTop+sectionHeight-150&&(currentActiveSectionId=section.id)})),!currentActiveSectionId&&sections.length>0&&(currentActiveSectionId=sections[0].id),navLinks.forEach((link=>{link.classList.remove("active"),link.getAttribute("href").substring(1)===currentActiveSectionId&&link.classList.add("active")}))};window.addEventListener("scroll",updateActiveNavLink),window.addEventListener("load",updateActiveNavLink),navLinks.forEach((link=>{link.addEventListener("click",(()=>{navLinks.forEach((nav=>nav.classList.remove("active"))),link.classList.add("active")}))}))}function initContactForm(){const contactForm=document.getElementById("contactForm");if(!contactForm)return;const formMessages=document.getElementById("form-messages"),sendButton=document.querySelector(".send-message-button");contactForm.addEventListener("submit",(function(event){event.preventDefault(),sendButton&&(sendButton.disabled=!0),formMessages&&(formMessages.textContent="Envoi en cours...",formMessages.style.color="#FFA500");const honeypot=document.getElementById("website");if(honeypot&&""!==honeypot.value)return console.warn("Spam détecté."),void setTimeout((()=>{formMessages&&(formMessages.textContent="Votre message a été envoyé avec succès !",formMessages.style.color="#4CAF50"),contactForm.reset(),sendButton&&(sendButton.disabled=!1)}),1e3);const nameField=document.getElementById("name"),emailField=document.getElementById("email"),subjectField=document.getElementById("subject"),messageField=document.getElementById("message"),templateParams={to_name:"Clément",from_name:nameField?nameField.value:"",from_email:emailField?emailField.value:"",subject:subjectField?subjectField.value:"",message:messageField?messageField.value:""};"undefined"!=typeof emailjs?(emailjs.init("UaKKY6fywjdxH9m9R"),emailjs.send("service_k7boed8","template_s013tj7",templateParams).then((()=>{formMessages&&(formMessages.textContent="Votre message a été envoyé avec succès !",formMessages.style.color="#4CAF50"),contactForm.reset(),sendButton&&(sendButton.disabled=!1)}),(error=>{formMessages&&(formMessages.textContent="Erreur : "+error.text,formMessages.style.color="#FF0000"),console.error("Erreur EmailJS :",error),sendButton&&(sendButton.disabled=!1)}))):console.error("La librairie EmailJS n'est pas chargée.")}))}function initSwipeIndicators(){const priceCardsContainer=document.querySelector(".price-cards-container"),dots=document.querySelectorAll(".swipe-indicator .dot");if(!priceCardsContainer||0===dots.length)return;const updateDots=()=>{const firstCard=priceCardsContainer.querySelector(".price-card");if(!firstCard)return;const cardWidthWithGap=firstCard.offsetWidth+parseFloat(getComputedStyle(priceCardsContainer).gap||"0");let activeIndex=Math.round(priceCardsContainer.scrollLeft/cardWidthWithGap);activeIndex=Math.max(0,Math.min(activeIndex,dots.length-1)),dots.forEach(((dot,index)=>{index===activeIndex?dot.classList.add("active"):dot.classList.remove("active")}))};priceCardsContainer.addEventListener("scroll",updateDots),updateDots()}function initTheme(){const themeToggleBtn=document.getElementById("theme-toggle"),darkIcon=document.getElementById("theme-toggle-dark-icon"),lightIcon=document.getElementById("theme-toggle-light-icon");themeToggleBtn&&("dark"===localStorage.getItem("color-theme")||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.classList.add("dark"),lightIcon?.classList.remove("hidden")):(document.documentElement.classList.remove("dark"),darkIcon?.classList.remove("hidden")),themeToggleBtn.addEventListener("click",(function(){darkIcon?.classList.toggle("hidden"),lightIcon?.classList.toggle("hidden"),localStorage.getItem("color-theme")?"light"===localStorage.getItem("color-theme")?(document.documentElement.classList.add("dark"),localStorage.setItem("color-theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("color-theme","light")):document.documentElement.classList.contains("dark")?(document.documentElement.classList.remove("dark"),localStorage.setItem("color-theme","light")):(document.documentElement.classList.add("dark"),localStorage.setItem("color-theme","dark"))})))}function initProjectFilters(){const buttons=document.querySelectorAll(".filter-btn"),cards=document.querySelectorAll(".project-card");if(0===buttons.length)return;const activeClasses=["bg-slate-900","dark:bg-white","text-white","dark:text-slate-900","font-bold","shadow-lg"],inactiveClasses=["bg-white","dark:bg-slate-800","border","border-slate-200","dark:border-white/10","text-slate-600","dark:text-slate-300","font-medium"];buttons.forEach((btn=>{btn.addEventListener("click",(()=>{const filter=btn.getAttribute("data-filter");buttons.forEach((b=>{b.classList.remove(...activeClasses),b.classList.add(...inactiveClasses)})),btn.classList.remove(...inactiveClasses),btn.classList.add(...activeClasses),cards.forEach((card=>{const category=card.getAttribute("data-category")||"";"all"===filter||category.includes(filter)?(card.classList.remove("hidden"),card.animate([{opacity:0,transform:"scale(0.95)"},{opacity:1,transform:"scale(1)"}],{duration:300,easing:"ease-out"})):card.classList.add("hidden")}))}))}))}document.addEventListener("DOMContentLoaded",(()=>{initNavbarScroll(),initContactForm(),initSwipeIndicators(),initTheme(),initProjectFilters()}));